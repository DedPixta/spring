SET SEARCH_PATH TO spring;

CREATE SCHEMA IF NOT EXISTS spring;

DROP TABLE IF EXISTS spring.sensor;

CREATE TABLE spring.sensor
(
    id   int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(30) NOT NULL UNIQUE
);

DROP TABLE IF EXISTS spring.measurement;

CREATE TABLE spring.measurement
(
    id         int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    value      float8                            NOT NULL CHECK ( value > -100 AND value < 100 ),
    raining    boolean                               NOT NULL,
    sensor_id  int REFERENCES spring.sensor (id) NOT NULL,
    created_at timestamp                         NOT NULL
);
